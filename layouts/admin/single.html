{{ define "header" }}
<link rel="stylesheet" href="https://unpkg.com/purecss@2.0.3/build/pure-min.css" integrity="sha384-cg6SkqEOCV1NbJoCu11+bm0NvBRc8IYLRGXkmNrqUBfTjmMYwNKPWBTIKyw9mHNJ" crossorigin="anonymous">
<link rel="stylesheet" href="https://unpkg.com/purecss@2.0.3/build/grids-responsive-min.css">

<style>
  div {
    height: auto;
  }
  div.main {
    padding-top: 2rem;
    display: block;
    margin: 0 auto;
    text-align: center;
  }
  
  div.main img {
    max-width: 15%;
  }

  .wrapper {
    margin: 2rem;
  }
  .copy, .toast {
    display: none;
  }
  .toast {
    background: rgba(143, 213, 166, 0.8);
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    z-index: 99;
    text-align: center;
    padding: 1rem;
    width: 100%;
  }
  .pure-g {
    border-bottom: 1px solid #efefef;
    padding: 1rem 0;
    text-align: center;
  }
</style>

<script>
  let toastTimeout = null;
  const copyUrl = (elm) => {
    const url = elm.getAttribute("data-url");
    const input = document.querySelector('input.copy');
    const toast = document.querySelector('.toast');
    if (url && input && toast) {
      if (toastTimeout) {
        clearTimeout(toastTimeout);
      }
      input.value = url;
      input.select();
      input.setSelectionRange(0, 99999);
      document.execCommand("copy");
      input.value = "";

      toast.innerText = `Copied URL: ${url}`;
      toast.style.display = 'block';

      toastTimeout = setTimeout(() => {
        toast.style.display = 'none';
      }, 3000);
    }
  };
</script>
{{ end }}

{{ define "second" }}
<input class="copy" type="text" />
<div class="wrapper">
  <div class="pure-g">
    <div class="pure-u-1-3"><strong>Title</strong></div>
    <div class="pure-u-1-3"><strong>Short (click to copy)</strong></div>
    <div class="pure-u-1-3"><strong>Original</strong></div>
  </div>
  {{ range sort (where .Site.Pages "Type" "stickers") ".Params.id" "desc" }}
    {{ $url := printf "%s/stickers/%s/" (.Site.Params.storeUrl) (urlize .Title) }}
    <div class="pure-g">
      <div class="pure-u-1-3">{{ .Title }}</div>
      <div class="pure-u-1-3">      
        <button class="pure-button" onclick="copyUrl(this)" data-url="{{ .Permalink | absURL }}">Copy</button>
      </div>
      <div class="pure-u-1-3"><a href="{{ $url }}">Go to PYOD</a></div>
    </div>
  {{ end }}
</div>

<div class="toast">

</div>
{{ end }}